# SQL注入

## 漏洞原理

攻击者注入恶意SQL语句，拼接到后端成功执行。

## 漏洞测试

1. 输入单引号、双引号或括号等闭合

   

2. 常用测试payload

   ```
   https://github.com/payloadbox/sql-injection-payload-list
   ```

## 测试工具

1. Burpsuite

   - 使用intruder功能 自带SQL注入爆破字典，可探测注入点

2. sqlmap

   可联动CO2插件

   ```
   使用手册
   https://sqlmap.kvko.live/usage
   
   常用命令
   python sqlmap.py -u http://xxx.xom --random-agent --cookie=COOKIE --batch -v 3 --delay 2
   
   从http请求探测
   -r
   
   测试指定参数 加*
   python sqlmap.py -u "http://targeturl/param1/value1*/param2/value2/"
   
   指纹识别
   默认识别指纹，如果想更准确识别开启下列参数
   -f 或 --fingerprint
   
   并发
   --threads
   
   使用技巧
   - 没检测到问题时可提升level等级探测尝试一下
   ```

## 漏洞防御

- WAF

- 预编译

  这种形式是预先确定了SQL的语法格式，用户输入不能改变后端SQL语法
